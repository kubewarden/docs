"use strict";(self.webpackChunkkubewarden_docusaurus=self.webpackChunkkubewarden_docusaurus||[]).push([[78947],{84846:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>a,contentTitle:()=>n,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>u});var s=i(85893),o=i(11151);const r={sidebar_label:"Custom Certificate Authorities",sidebar_position:50,title:"Custom certificate authorities",description:"Using custom certificate authorities with Kubewarden.",keywords:["kubewarden","kubernetes","custom certificate authorities"],"doc-persona":["kubewarden-user","kubewarden-operator","kubewarden-distributor","kubewarden-integrator"],"doc-type":["howto"],"doc-topic":["distributing-policies","custom-certificate-authorities"]},n=void 0,c={id:"howtos/custom-certificate-authorities",title:"Custom certificate authorities",description:"Using custom certificate authorities with Kubewarden.",source:"@site/versioned_docs/version-1.12/howtos/custom-certificate-authorities.md",sourceDirName:"howtos",slug:"/howtos/custom-certificate-authorities",permalink:"/howtos/custom-certificate-authorities",draft:!1,unlisted:!1,editUrl:"https://github.com/kubewarden/docs/edit/main/versioned_docs/version-1.12/howtos/custom-certificate-authorities.md",tags:[],version:"1.12",lastUpdatedAt:1717397873e3,sidebarPosition:50,frontMatter:{sidebar_label:"Custom Certificate Authorities",sidebar_position:50,title:"Custom certificate authorities",description:"Using custom certificate authorities with Kubewarden.",keywords:["kubewarden","kubernetes","custom certificate authorities"],"doc-persona":["kubewarden-user","kubewarden-operator","kubewarden-distributor","kubewarden-integrator"],"doc-type":["howto"],"doc-topic":["distributing-policies","custom-certificate-authorities"]},sidebar:"docs",previous:{title:"Secure supply chain",permalink:"/howtos/secure-supply-chain"},next:{title:"Raw policies",permalink:"/howtos/raw-policies"}},a={},u=[{value:"The <code>sources.yaml</code> file",id:"the-sourcesyaml-file",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",p:"p",...(0,o.a)(),...e.components},{Head:i}=t;return i||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Head",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i,{children:(0,s.jsx)("link",{rel:"canonical",href:"https://docs.kubewarden.io/howtos/custom-certificate-authorities"})}),"\n",(0,s.jsxs)(t.p,{children:["With both of ",(0,s.jsx)(t.code,{children:"kwctl"})," and ",(0,s.jsx)(t.code,{children:"policy-server"}),"\nyou can pull policies from Open Container Initiative (OCI) registries and HTTP servers.\nYou can only push policies to OCI registries.\nBy default, HTTPS is used with host TLS verification for this."]}),"\n",(0,s.jsxs)(t.p,{children:["The system's certificate authority (CA) store is used to\nvalidate the trusted chain of certificates from the OCI registry.\nIn a standard Kubewarden installation, the ",(0,s.jsx)(t.code,{children:"policy-server"})," uses the\nCA store shipped with its Linux container.\nOn the client side, ",(0,s.jsx)(t.code,{children:"kwctl"})," uses your operating system CA store."]}),"\n",(0,s.jsxs)(t.p,{children:["If you are using the\n",(0,s.jsx)(t.a,{href:"https://github.com/kubewarden/kubewarden-controller",children:"Kubewarden Controller"}),",\nyou can configure the PolicyServer via its\n",(0,s.jsxs)(t.a,{href:"/howtos/policy-servers/custom-cas",children:[(0,s.jsx)(t.code,{children:"spec"})," fields"]}),"."]}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.p,{children:["The default behavior of ",(0,s.jsx)(t.code,{children:"kwctl"})," and ",(0,s.jsx)(t.code,{children:"policy-server"})," enforces HTTPS with trusted certificates matching the system CA store.\nYou can interact with registries using untrusted certificates or even without TLS, by using the ",(0,s.jsx)(t.code,{children:"insecure_sources"})," setting.\nClearly, it's not for production environments."]})}),"\n",(0,s.jsxs)(t.h2,{id:"the-sourcesyaml-file",children:["The ",(0,s.jsx)(t.code,{children:"sources.yaml"})," file"]}),"\n",(0,s.jsxs)(t.p,{children:["You can tune the push-pull behavior of ",(0,s.jsx)(t.code,{children:"kwctl"})," and ",(0,s.jsx)(t.code,{children:"policy-server"})," using the ",(0,s.jsx)(t.code,{children:"sources.yaml"})," file."]}),"\n",(0,s.jsxs)(t.p,{children:["For reference details, check the ",(0,s.jsx)(t.a,{href:"/reference/sources_yaml",children:(0,s.jsx)(t.code,{children:"sources.yaml"})})," reference."]})]})}function h(e={}){const{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},11151:(e,t,i)=>{i.d(t,{Z:()=>c,a:()=>n});var s=i(67294);const o={},r=s.createContext(o);function n(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:n(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);