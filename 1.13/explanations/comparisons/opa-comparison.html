<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-1.13 docs-doc-page docs-doc-id-explanations/comparisons/opa-comparison" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.1">
<title data-rh="true">Kubewarden vs OPA Gatekeeper | Kubewarden</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.kubewarden.io/1.13/explanations/comparisons/opa-comparison"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.13"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.13"><meta data-rh="true" name="docsearch:version" content="1.13"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.13"><meta data-rh="true" property="og:title" content="Kubewarden vs OPA Gatekeeper | Kubewarden"><meta data-rh="true" name="description" content="A brief comparison of the difference between Kubewarden and OPA Gatekeeper."><meta data-rh="true" property="og:description" content="A brief comparison of the difference between Kubewarden and OPA Gatekeeper."><meta data-rh="true" name="keywords" content="kubewarden,kubernetes,opa gatekeeper,comparison"><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="alternate" href="https://docs.kubewarden.io/1.13/explanations/comparisons/opa-comparison" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.kubewarden.io/1.13/explanations/comparisons/opa-comparison" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://D1IWU8P361-dsn.algolia.net" crossorigin="anonymous"><link data-rh="true" rel="canonical" href="https://docs.kubewarden.io/explanations/comparisons/opa-comparison"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PSW07XK7TM"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-PSW07XK7TM",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Kubewarden" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.2b6cfc81.css">
<script src="/assets/js/runtime~main.dfeb94dc.js" defer="defer"></script>
<script src="/assets/js/main.aa004e9a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/icon-kubewarden.svg" alt="The Kubewarden Project logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/icon-kubewarden.svg" alt="The Kubewarden Project logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Kubewarden</b></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/1.13/explanations/comparisons/opa-comparison">1.13</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/next/explanations/comparisons/opa-comparison">Next ðŸš§</a></li><li><a class="dropdown__link" href="/explanations/comparisons/opa-comparison">1.19</a></li><li><a class="dropdown__link" href="/1.18/explanations/comparisons/opa-comparison">1.18</a></li><li><a class="dropdown__link" href="/1.17/explanations/comparisons/opa-comparison">1.17</a></li><li><a class="dropdown__link" href="/1.16/explanations/comparisons/opa-comparison">1.16</a></li><li><a class="dropdown__link" href="/1.15/explanations/comparisons/opa-comparison">1.15</a></li><li><a class="dropdown__link" href="/1.14/explanations/comparisons/opa-comparison">1.14</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/1.13/explanations/comparisons/opa-comparison">1.13</a></li><li><a class="dropdown__link" href="/1.12/explanations/comparisons/opa-comparison">1.12</a></li><li><a class="dropdown__link" href="/1.11/explanations/comparisons/opa-comparison">1.11</a></li><li><a class="dropdown__link" href="/1.10">1.10</a></li><li><a class="dropdown__link" href="/1.9">1.9</a></li><li><a class="dropdown__link" href="/1.8">1.8</a></li><li><a class="dropdown__link" href="/1.7">1.7</a></li></ul></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/kubewarden/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a href="https://kubernetes.slack.com/archives/kubewarden" target="_blank" rel="noopener noreferrer" class="dropdown__link">Slack<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://twitter.com/kubewarden" target="_blank" rel="noopener noreferrer" class="dropdown__link">X/Twitter<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/1.13">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/1.13/quick-start">Quick start</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/1.13/tutorials/writing-policies">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/1.13/explanations/mutating-policies">Explanations</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/1.13/explanations/mutating-policies">Mutating policies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/1.13/explanations/context-aware-policies">Context aware policies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/1.13/explanations/distributing-policies">Distributing policies</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/1.13/explanations/comparisons/opa-comparison">Comparisons</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/1.13/explanations/comparisons/opa-comparison">Kubewarden vs OPA Gatekeeper</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/1.13/explanations/audit-scanner">Audit Scanner</a><button aria-label="Expand sidebar category &#x27;Audit Scanner&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/1.13/explanations/architecture">Architecture</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/1.13/howtos/tasks">Howtos</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/1.13/reference/CRDs">Reference</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/1.13/disclosure">Security disclosure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/1.13/glossary">Glossary</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Kubewarden<!-- --> <b>1.13</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/explanations/comparisons/opa-comparison">latest version</a></b> (<!-- -->1.19<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Explanations</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Comparisons</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Kubewarden vs OPA Gatekeeper</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.13</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Kubewarden vs OPA Gatekeeper</h1></header>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>This page has been written during August 2023. Both projects might have evolved
since then.</p><p>If you find something is missing or inaccurate, please
<a href="https://github.com/kubewarden/docs/" target="_blank" rel="noopener noreferrer">file an issue</a>
or open a PR using the link at the bottom of the page.</p></div></div>
<p>Both OPA Gatekeeper and Kubewarden are open source projects, and part of CNCF.</p>
<p>This table provides a comparison between OPA Gatekeeper and Kubewarden. Topics requiring more information have links to further explanation.</p>
<table><thead><tr><th></th><th>OPA Gatekeeper</th><th>Kubewarden</th></tr></thead><tbody><tr><td>Validation</td><td>âœ…</td><td>âœ…</td></tr><tr><td>Mutation</td><td>âœ…</td><td>âœ…</td></tr><tr><td>Policy language <a href="#writing-policies">[1]</a></td><td>Rego</td><td>Rego, Go, Rust,...</td></tr><tr><td>Context aware <a href="#context-aware">[2]</a></td><td>âœ…</td><td>âœ…</td></tr><tr><td>Kubernetes integration <a href="#kubernetes-integration">[3]</a></td><td>cluster wide CRD</td><td>cluster wide and namespaced CRDs</td></tr><tr><td>Policy distribution <a href="#policy-distribution">[4]</a></td><td>embedded into Kubernetes CR</td><td>Container registry</td></tr><tr><td>CI/CD integration <a href="#cicd-integration">[5]</a></td><td>âœ…</td><td>âœ…</td></tr><tr><td>Policy enforcement modes</td><td>deny, warn</td><td>deny, warn</td></tr><tr><td>Deployment mode <a href="#deployment-mode">[6]</a></td><td>single evaluation server</td><td>multiple evaluation servers</td></tr><tr><td>Background checks <a href="#background-checks">[7]</a></td><td>âœ…</td><td>âœ…</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="types-of-policies">Types of policies<a href="#types-of-policies" class="hash-link" aria-label="Direct link to Types of policies" title="Direct link to Types of policies">â€‹</a></h2>
<p>Both OPA Gatekeeper and Kubernetes can write validation and mutation policies.</p>
<p>These policies can target any kind of Kubernetes resource, including Custom Resources.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="writing-policies">Writing policies<a href="#writing-policies" class="hash-link" aria-label="Direct link to Writing policies" title="Direct link to Writing policies">â€‹</a></h2>
<p>OPA Gatekeeper policies are written using <a href="https://www.openpolicyagent.org/docs/latest/#rego" target="_blank" rel="noopener noreferrer">Rego</a>.
Rego is a query language created by the Open Policy Agent project.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Rego can only be used to write validating policies. Mutating policies do not
use Rego, instead using ad-hoc rules defined in YAML (see <a href="https://open-policy-agent.github.io/gatekeeper/website/docs/mutation" target="_blank" rel="noopener noreferrer">here</a>).</p></div></div>
<p>Kubewarden allows policies to be written using different paradigms. Policy authors
can use both traditional programming languages (like Go, Rust and others) or <a href="https://en.wikipedia.org/wiki/Domain-specific_language" target="_blank" rel="noopener noreferrer">Domain Specific Languages</a> like Rego.
Kubewarden&#x27;s validating and mutating policies are written in the same way.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Rego is used by the <a href="https://github.com/open-policy-agent/kube-mgmt" target="_blank" rel="noopener noreferrer">kube-mgmt</a>
open source project, which is part of the Open Policy Agent project.</p><p>Despite using the same language, policies written for kube-mgmt are
not compatible with OPA Gatekeeper and vice versa.</p><p>Kubewarden can use Rego policies that have been written for both Open Policy Agent and
for OPA Gatekeeper. More information is <a href="https://docs.kubewarden.io/writing-policies/rego/intro-rego" target="_blank" rel="noopener noreferrer">here</a>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="context-aware">Context aware<a href="#context-aware" class="hash-link" aria-label="Direct link to Context aware" title="Direct link to Context aware">â€‹</a></h2>
<p>Sometimes a policy needs data about the current state of the cluster to make a
validation/mutation decision. For example, a policy validating Ingress resources might
need to know the other Ingress resources already defined inside of the cluster
to ensure no clashes happen.
These kind of policies are called &quot;context aware&quot;.</p>
<p>Both OPA Gatekeeper and Kubewarden support these types of policies.</p>
<p>When deploying OPA Gatekeeper, a Kubernetes administrator decides which type of
cluster data should be made available to the policies at evaluation time.</p>
<p>It&#x27;s important to highlight how this data is then accessible by all the policies
deployed.</p>
<p>For example, if an OPA Gatekeeper policy requires access to Kubernetes Secrets,
all the other policies being deployed will be able to read this data as well.</p>
<p>On the other hand, Kubewarden provides a granular access to cluster resources.
Each policy has access only to the resources that the Kubernetes administrator
specified. Attempting to read unauthorized data is immediately blocked and
reported to the cluster administrators.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-integration">Kubernetes integration<a href="#kubernetes-integration" class="hash-link" aria-label="Direct link to Kubernetes integration" title="Direct link to Kubernetes integration">â€‹</a></h2>
<p>OPA Gatekeeper has a cluster wide Custom Resource that allows policy definition
and how and where to enforce them.</p>
<p>Kubewarden has two different types of Custom Resources used
to declare policies. One works at the Cluster level, the other is namespaced.
The namespaced Custom Resource is called <code>AdmissionPolicy</code>.</p>
<p>Policies deployed via a <code>AdmissionPolicy</code> resource affect only the resources
created within the Namespace they belong to.
Because of that, non-admin Kubernetes users could be allowed
the RBAC privileges to manage <code>AdmissionPolicy</code> resources inside of the
Namespaces they have access to.</p>
<p>This allows Kubernetes administrators to delegate some policy-related work.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="policy-distribution">Policy distribution<a href="#policy-distribution" class="hash-link" aria-label="Direct link to Policy distribution" title="Direct link to Policy distribution">â€‹</a></h2>
<p>The source code of the policy (the Rego code) has to be written inside
the Custom Resource that defines a policy inside Kubernetes.</p>
<p>Kubewarden policies are managed like container images. Once built, they are pushed
into container registries as OCI artifacts.</p>
<p>Kubewarden policies can be signed and verified using container image tools
like <code>cosign</code>, from the <a href="https://sigstore.dev" target="_blank" rel="noopener noreferrer">Sigstore project</a>.</p>
<p>Kubewarden policies can be distributed among geographically distributed container
registries using the traditional tools and processes adopted for container images.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cicd-integration">CI/CD integration<a href="#cicd-integration" class="hash-link" aria-label="Direct link to CI/CD integration" title="Direct link to CI/CD integration">â€‹</a></h2>
<p>Both OPA Gatekeeper and Kubewarden can be managed using GitOps methodologies.</p>
<p>However, in the context of OPA Gatekeeper, there&#x27;s a coupling between the policy&#x27;s source code
(the Rego code) and the Custom Resource used to deploy it inside of Kubernetes.
This introduces extra steps inside of CI/CD pipelines.</p>
<p>Rego has <a href="https://www.openpolicyagent.org/docs/latest/policy-testing/" target="_blank" rel="noopener noreferrer">testing tools</a>
that allow the creation of unit test suites. Writing tests and executing them inside
a CI/CD pipeline is essential to ensure policies behave as expected.</p>
<p>To use these testing tools, the source code of the policy must be made available
inside of dedicated text files. It&#x27;s not possible to read the source code from the YAML
files used to declare the OPA Gatekeeper policy.
The CI/CD pipeline must keep in sync the Rego source code being tested with the code
defined inside of the OPA Gatekeeper Custom Resource. This can be done using some 3rd
party tools.</p>
<p>Kubewarden policies have CI/CD pipelines like traditional microservices.
Usually their source code lives inside a Git repository and then, using
traditional CI/CD systems, unit tests are ran against it. The unit tests are
written using the testing frameworks of the language used to write the policy.
Once all the tests pass the policy is compiled to WebAssembly and pushed
to a container registry.
This kind of pipeline is usually maintained by the policy author.</p>
<p>Kubernetes administrators typically maintain other automation pipelines that react to
new releases of the policy (leveraging automation tools like
<a href="https://docs.github.com/en/code-security/dependabot/working-with-dependabot" target="_blank" rel="noopener noreferrer">Dependabot</a>,
<a href="https://www.mend.io/renovate/" target="_blank" rel="noopener noreferrer">Renovate bot</a>,
<a href="https://www.updatecli.io/" target="_blank" rel="noopener noreferrer">updatecli</a> and others), or to changes to the
policy configuration.</p>
<p>The pipeline tests the policy against different types of requests. The testing can be done using
the <a href="https://github.com/kubewarden/kwctl" target="_blank" rel="noopener noreferrer">kwctl</a> cli tool, without requiring a running
Kubernetes cluster. kwctl uses the same evaluation engine used by the Kubewarden stack deployed
inside of a Kubernetes cluster.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="policy-enforcement-modes">Policy enforcement modes<a href="#policy-enforcement-modes" class="hash-link" aria-label="Direct link to Policy enforcement modes" title="Direct link to Policy enforcement modes">â€‹</a></h2>
<p>Both OPA Gatekeeper and Kubewarden can deploy policies using two different operation modes:</p>
<ul>
<li><code>deny</code>: violation of a policy causes the request to be rejected</li>
<li><code>warn</code>: violation of a policy does not cause rejection. The
violation is logged for auditing purposes</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deployment-mode">Deployment mode<a href="#deployment-mode" class="hash-link" aria-label="Direct link to Deployment mode" title="Direct link to Deployment mode">â€‹</a></h2>
<p>All the OPA Gatekeeper policies are evaluated by the same server.
On the other hand, Kubewarden allows multiple evaluation servers to be defined.
These servers are defined by a Custom Resource called <code>PolicyServer</code>.</p>
<p>When declaring a Kubewarden policy, the Kubernetes administrator decides
which <code>PolicyServer</code> will host it.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>The <code>PolicyServer</code> object is a high level abstraction introduced by Kubewarden.
Behind the scenes a <code>Deployment</code> with a specific replica size is created.</p><p>Each <code>PolicyServer</code> can have a different replica size from others.</p></div></div>
<p>This allows interesting scenarios like the following ones:</p>
<ul>
<li>Deploy critical policies to a dedicated Policy Server pool</li>
<li>Deploy the policies of a noisy tenant to a dedicated Policy Server pool</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="background-checks">Background checks<a href="#background-checks" class="hash-link" aria-label="Direct link to Background checks" title="Direct link to Background checks">â€‹</a></h2>
<p>As policies are added, removed, and reconfigured the resources already inside
of the cluster might become non-compliant.</p>
<p>Both OPA Gatekeeper and Kubewarden have a scanner that operates in the background.
This scanner evaluates resources already defined inside
the cluster and flags non-compliant ones.</p>
<p>The only difference between OPA Gatekeeper and Kubewarden is how the scanner results
are saved.</p>
<p>OPA Gatekeeper adds the violation details to the <code>status</code> field of a given <code>Constraint</code>
Custom Resource (see <a href="https://open-policy-agent.github.io/gatekeeper/website/docs/audit#constraint-status" target="_blank" rel="noopener noreferrer">here</a>).</p>
<p>Kubewarden instead stores the results inside of a set of the Policy Report
Custom Resources defined by the <a href="https://github.com/kubernetes-sigs/wg-policy-prototypes/tree/master/policy-report" target="_blank" rel="noopener noreferrer">Policy Report working group</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/kubewarden/docs/edit/main/versioned_docs/version-1.13/explanations/comparisons/opa-comparison.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-12-05T14:02:09.000Z" itemprop="dateModified">Dec 5, 2024</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/1.13/explanations/distributing-policies"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Distributing policies</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/1.13/explanations/audit-scanner"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Audit Scanner</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#types-of-policies" class="table-of-contents__link toc-highlight">Types of policies</a></li><li><a href="#writing-policies" class="table-of-contents__link toc-highlight">Writing policies</a></li><li><a href="#context-aware" class="table-of-contents__link toc-highlight">Context aware</a></li><li><a href="#kubernetes-integration" class="table-of-contents__link toc-highlight">Kubernetes integration</a></li><li><a href="#policy-distribution" class="table-of-contents__link toc-highlight">Policy distribution</a></li><li><a href="#cicd-integration" class="table-of-contents__link toc-highlight">CI/CD integration</a></li><li><a href="#policy-enforcement-modes" class="table-of-contents__link toc-highlight">Policy enforcement modes</a></li><li><a href="#deployment-mode" class="table-of-contents__link toc-highlight">Deployment mode</a></li><li><a href="#background-checks" class="table-of-contents__link toc-highlight">Background checks</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Kubewarden is a <a target="_blank" href="https://cncf.io">CNCF</a> project,
      originally created by <a target="_blank" href="https://rancher.com">SUSE Rancher</a>.<br>Copyright Â© 2024 Kubewarden project authors. All rights reserved.</div></div></div></footer></div>
</body>
</html>